# ==============================
# ÉMERGENCE — Requirements (E2E)
# Cibles : Windows dev + Cloud Run
# ==============================

# --- Core serveur ---
fastapi==0.109.2                 # match env stable
uvicorn[standard]>=0.24,<0.31    # uvloop/httptools inclus pour perf
websockets>=11.0.2
python-multipart>=0.0.9

# --- DI & Config ---
dependency-injector>=4.41,<5
pydantic>=2.6,<3
pydantic-settings>=2.2,<3
python-dotenv>=1.0,<2

# --- LLM Providers ---
openai>=1.35,<2
google-generativeai==0.8.5       # match env, évite breaking changes
anthropic==0.64.0                # match env stable
tiktoken>=0.5.2,<0.8

# --- Données & Vectors ---
aiosqlite==0.21.0                # match env stable
chromadb==0.4.22                 # version connue fiable

# --- Embeddings & NumPy/Torch ---
sentence-transformers>=2.7,<3
# Torch CPU par défaut ; override si CUDA requis dans ton environnement
torch>=2.1,<3
numpy==1.26.4                    # match env ; <2 pour compat torch

# --- Fichiers & Utilitaires ---
aiofiles==24.1.0                 # match env stable
PyMuPDF>=1.24.10,<1.25           # fitz/PyMuPDF récent
python-docx>=1.1.0,<1.2

# Spécifique OS (magic/libmagic)
python-magic>=0.4.27; platform_system!="Windows"
python-magic-bin>=0.4.14; platform_system=="Windows"

chardet==5.2.0
psutil>=5.9,<6
