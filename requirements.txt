# ==============================
# EMERGENCE - Requirements (E2E)
# Targets: Windows dev + Cloud Run
# ==============================

# --- Core server ---
fastapi==0.109.2                 # match env stable
uvicorn[standard]>=0.24,<0.31    # uvloop/httptools included for perf
websockets>=11.0.2
python-multipart>=0.0.9

# --- DI & Config ---
dependency-injector>=4.41,<5
pydantic>=2.6,<3
pydantic-settings>=2.2,<3
python-dotenv>=1.0,<2

# --- LLM providers ---
openai>=1.35,<2
google-generativeai==0.8.5       # match env, avoid breaking changes
anthropic==0.64.0                # match env stable
tiktoken>=0.5.2,<0.8

# --- Data & vectors ---
aiosqlite==0.21.0                # match env stable
chromadb==0.4.22                 # known reliable version
qdrant-client>=1.7.3,<2          # optional vector backend (Qdrant)

# --- Embeddings & NumPy/Torch ---
sentence-transformers>=2.7,<3
# Torch CPU by default; override if CUDA is required in your environment
torch>=2.1,<3
numpy==1.26.4                    # matches env; <2 for torch compatibility

# --- Files & utilities ---
aiofiles==24.1.0                 # match env stable
PyMuPDF>=1.24.10,<1.25           # recent fitz/PyMuPDF
python-docx>=1.1.0,<1.2

# OS specific (magic/libmagic)
python-magic>=0.4.27; platform_system!="Windows"
python-magic-bin>=0.4.14; platform_system=="Windows"

chardet==5.2.0
psutil>=5.9,<6

# --- Tooling & QA ---
pytest>=8.3,<9                   # ensure unit tests run in CI/local
ruff>=0.13,<1                   # lint backend modules (Pydantic v2, style)
mypy>=1.18,<2                   # static typing for backend
