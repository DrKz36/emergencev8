/* src/frontend/features/debate/debate.css */
/* V38.2 — layout PC (schéma) + RAG "Power" SVG rouge/vert (scopé Débat) */

:root{
  --glass-bg: rgba(22,22,26,.55);
  --glass-blur: 18px;
  --glass-border-color: rgba(255,255,255,.10);
  --radius-xl: 18px;

  --color-anima:#e11d48; /* Rouge OFF */
  --color-neo:#2563eb;
  --color-nexus:#10b981; /* Vert ON  */

  --color-text-primary:#e9e9ef;
  --color-text-secondary:#bfc2cd;

  --color-background-secondary: rgba(255,255,255,.02);
  --color-background-tertiary: rgba(255,255,255,.035);

  --border-color: rgba(255,255,255,.18);
  --border-width: 1px;

  --space-2:.5rem;
  --space-3:.75rem;
  --space-4:1rem;
  --space-6:1.25rem;
  --space-8:1.75rem;
  --space-12:2.5rem;

  --text-base: 1rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --weight-medium: 500;
  --weight-semibold: 600;

  --debateBubbleW: min(920px, 92vw);

  --rag-off: var(--color-anima);
  --rag-on:  var(--color-nexus);
}

/* ===== Wrapper + Card ===== */

.debate-view-wrapper{
  width:100%;
  display:flex; justify-content:center; align-items:flex-start;
  padding:var(--space-8);
}
.debate-view-wrapper .card{
  background-color:var(--glass-bg);
  border:1px solid var(--glass-border-color);
  border-radius:var(--radius-xl);
  backdrop-filter:blur(calc(var(--glass-blur)*1.25));
  -webkit-backdrop-filter:blur(calc(var(--glass-blur)*1.25));
  box-shadow:0 16px 40px rgba(0,0,0,.35), inset 0 0 32px rgba(255,255,255,.03);
  max-width:1200px;
  width:95%;
}

.card-header{ text-align:center; border-bottom:1px solid var(--glass-border-color); }
.card-title{ color:#fff; margin:0; font-size:var(--text-2xl); font-weight:var(--weight-semibold); }
.debate-status{ margin-top:var(--space-2); color:var(--color-text-secondary); }

.card-body{ padding:var(--space-6); }
.card-footer{ padding:var(--space-6); }

/* ===== Vue Création ===== */

.debate-create-body{
  display:grid;
  grid-template-columns: 1fr;
  row-gap: var(--space-8);
  grid-template-areas:
    "topic"
    "config"
    "rag";
}

/* Sujet */
.debate-create-body .form-topic{ grid-area: topic; }
.debate-create-body .form-group > label{
  display:block; margin-bottom: var(--space-4);
}
.debate-create-body .form-topic .input-text{
  width:100%;
  min-height:16rem;
  resize:vertical;
}

/* Cadre pointillé "Configuration" (2x2) */
.debate-create-body .config-grid{ 
  grid-area: config;
  position:relative;
  padding: var(--space-6);
  border:1px dashed var(--glass-border-color);
  border-radius: 14px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  column-gap: var(--space-8);
  row-gap: var(--space-6);
  grid-template-areas:
    "attacker challenger"
    "rounds   mediator";
}
.debate-create-body .config-grid::before{
  content:"Configuration";
  position:absolute;
  top:-0.75rem; left:1rem;
  padding:0 .4rem;
  font-size:.95rem;
  color: var(--color-text-secondary);
  background: var(--glass-bg);
}

/* Slots de la config */
.debate-create-body .form-attacker{ grid-area: attacker; }
.debate-create-body .form-challenger{ grid-area: challenger; }
.debate-create-body .form-rounds{ grid-area: rounds; }
.debate-create-body .form-mediator{ grid-area: mediator; }
.debate-create-body .form-attacker,
.debate-create-body .form-challenger,
.debate-create-body .form-rounds,
.debate-create-body .form-mediator{ margin-bottom: var(--space-2); }

/* Segmented */
.segmented{ display:flex; gap:.5rem; flex-wrap:wrap; }
.button-tab{ padding:.45rem .9rem; border:none; background:transparent; cursor:pointer; }
.debate-create-body .button-tab.active{ border-bottom:2px solid currentColor; }

/* Tabs actifs colorés par agent */
.debate-create-body .button-tab.agent--anima.active{
  color: var(--color-anima) !important;
  border-bottom-color: var(--color-anima) !important;
  box-shadow: 0 0 10px rgba(225,29,72,.55) !important;
}
.debate-create-body .button-tab.agent--neo.active{
  color: var(--color-neo) !important;
  border-bottom-color: var(--color-neo) !important;
  box-shadow: 0 0 10px rgba(37,99,235,.45) !important;
}
.debate-create-body .button-tab.agent--nexus.active{
  color: var(--color-nexus) !important;
  border-bottom-color: var(--color-nexus) !important;
  box-shadow: 0 0 10px rgba(16,185,129,.45) !important;
}

/* Affichage "Synthèse par" */
.mediator-display{
  display:inline-block;
  padding:.55rem 1rem;
  border:1px solid var(--glass-border-color);
  border-radius: 10px;
  background: var(--color-background-tertiary);
  min-width: 120px;
  text-align: center;
}

/* Ligne RAG */
.debate-create-body .rag-row{
  grid-area: rag;
  display:flex; align-items:center; gap:.75rem;
}
.debate-create-body .rag-label{ color:#fff; opacity:.9; font-size:.95rem; }

/* RAG Power (SVG rouge/vert, scopé Débat) */
.debate-create-body .rag-power{
  display:inline-flex; align-items:center; justify-content:center;
  width:34px; height:34px; border-radius:50%;
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.25);
  cursor:pointer;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
}
.debate-create-body .rag-power:hover{ transform: translateY(-1px); background: rgba(255,255,255,.12); }
.debate-create-body .rag-power .icon-power{ width:22px; height:22px; }
.debate-create-body .rag-power .power-line,
.debate-create-body .rag-power .power-circle{
  fill:none; stroke: var(--rag-off); stroke-width:2.25; stroke-linecap:round; stroke-linejoin:round;
  transition: stroke .2s ease, filter .2s ease;
}
.debate-create-body .rag-power[aria-checked="true"] .power-line,
.debate-create-body .rag-power[aria-checked="true"] .power-circle{
  stroke: var(--rag-on);
  filter: drop-shadow(0 0 6px rgba(16,185,129,.65));
}

/* ===== Vue Déroulé ===== */

.debate-timeline{ display:flex; flex-direction:column; gap:18px; padding:var(--space-4) 0; }
.timeline-turn-separator{ position:relative; display:flex; justify-content:center; align-items:center; color:var(--color-text-secondary); font-size:.85rem; }
.timeline-turn-separator::before,
.timeline-turn-separator::after{
  content:""; position:absolute; top:50%; height:1px; width:45%; background:rgba(255,255,255,.14);
}
.timeline-turn-separator::before{ left:0; } 
.timeline-turn-separator::after{ right:0; }
.timeline-turn-separator>span{ display:inline-block; padding:0 var(--space-3); background:transparent; }

/* Centrage bulles (override chat.css) */
.debate-timeline .message{ display:flex; width:100%; margin:0; }
.debate-timeline .message-content{
  width:var(--debateBubbleW) !important;
  max-width:var(--debateBubbleW) !important;
  min-width:var(--debateBubbleW) !important;
  margin:0 auto !important;
  background:transparent !important;
  border:none !important;
  box-shadow:none !important;
  display:flex; flex-direction:column; gap:.5rem;
}
.debate-timeline .message-avatar{ display:none; }

.debate-timeline .message-text{
  border:none; border-radius:14px; padding:.9rem 1rem; color:#fff;
  -webkit-backdrop-filter:blur(6px) saturate(120%); 
  backdrop-filter:blur(6px) saturate(120%);
  box-shadow:0 10px 24px rgba(0,0,0,.25), 0 0 20px rgba(255,255,255,.07);
}

/* Couleurs par agent */
.message.assistant.agent--anima   .message-text{ background: color-mix(in srgb, var(--color-anima) 26%, transparent); }
.message.assistant.agent--neo     .message-text{ background: color-mix(in srgb, var(--color-neo) 22%, transparent); }
.message.assistant.agent--nexus   .message-text{ background: color-mix(in srgb, var(--color-nexus) 22%, transparent); }

/* Synthèse : italique */
.debate-timeline .message.assistant.synthesis .message-text{ font-style: italic; }
.debate-timeline .message.assistant.agent--anima .sender-name{ color:#ffd3db; }
.debate-timeline .message.assistant.agent--neo   .sender-name{ color:#cfe7ff; }
.debate-timeline .message.assistant.agent--nexus .sender-name{ color:#b1fcd4; }

/* ===== Responsive ===== */

@media (max-width: 900px){
  .debate-create-body .config-grid{
    grid-template-columns: 1fr;
    grid-template-areas:
      "attacker"
      "challenger"
      "rounds"
      "mediator";
  }
  .debate-create-footer .button-xxl{ width:100%; min-width:0; }
}

@media (max-width: 430px){
  .debate-create-footer{ padding-top:0; }
  .debate-create-footer .button-xxl{ width:100%; }
}
