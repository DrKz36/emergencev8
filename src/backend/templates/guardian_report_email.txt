ðŸ›¡ï¸ RAPPORT GUARDIAN Ã‰MERGENCE V8
{'='*70}

GÃ©nÃ©rÃ© le: {{ timestamp }}
Statut Global: {{ global_status }}

{'='*70}

{% if prod_report %}
â˜ï¸ PRODUCTION CLOUD RUN
{'-'*70}
Statut: {{ prod_report.status | default('UNKNOWN') }}
{% if prod_report.summary %}
â€¢ Logs analysÃ©s: {{ prod_report.summary.total_logs | default(0) }}
â€¢ Erreurs: {{ prod_report.summary.error_count | default(0) }}
â€¢ Warnings: {{ prod_report.summary.warning_count | default(0) }}
â€¢ Critiques: {{ prod_report.summary.critical_count | default(0) }}
{% endif %}

{% if prod_report.recommendations %}
ðŸ“‹ Recommandations:
{% for rec in prod_report.recommendations[:3] %}
  [{{ rec.priority }}] {{ rec.action }}
{% endfor %}
{% endif %}

{% if prod_report.log_samples %}
ðŸ“ EXTRAITS DE LOGS (dernier run)
{'-'*70}
{% for log in prod_report.log_samples[:5] %}
- [{{ log.severity | default('DEFAULT') }}] {{ log.timestamp }}
  {% if log.http_method or log.endpoint %}{{ log.http_method | default('GET') }} {{ log.endpoint | default('') }}{% if log.status_code %} â†’ {{ log.status_code }}{% endif %}
  {% endif %}
  {{ log.message | default('') }}
  {% if log.request_id %}request_id={{ log.request_id }}{% endif %}
{% if log.payload_excerpt %}  payload={{ log.payload_excerpt }}{% if log.payload_excerpt|length == 500 %}...{% endif %}{% endif %}
{% endfor %}
{% if prod_report.log_samples | length > 5 %}
... {{ prod_report.log_samples | length - 5 }} autres entrÃ©es dans le rapport JSON
{% endif %}
{% endif %}

{% endif %}

{% if docs_report %}
ðŸ“š DOCUMENTATION (ANIMA)
{'-'*70}
Statut: {{ docs_report.status | default('UNKNOWN') }}
{% if docs_report.summary %}
â€¢ Gaps dÃ©tectÃ©s: {{ docs_report.summary.total_gaps | default(0) }}
â€¢ Mises Ã  jour proposÃ©es: {{ docs_report.summary.proposed_updates | default(0) }}
{% endif %}

{% if docs_report.recommendations %}
ðŸ“‹ Recommandations:
{% for rec in docs_report.recommendations[:3] %}
  [{{ rec.priority }}] {{ rec.action }}
{% endfor %}
{% endif %}

{% endif %}

{% if integrity_report %}
ðŸ” INTÃ‰GRITÃ‰ SYSTÃˆME (NEO)
{'-'*70}
Statut: {{ integrity_report.status | default('UNKNOWN') }}
{% if integrity_report.summary %}
â€¢ ProblÃ¨mes critiques: {{ integrity_report.summary.critical_count | default(0) }}
â€¢ Warnings: {{ integrity_report.summary.warning_count | default(0) }}
{% endif %}

{% if integrity_report.recommendations %}
ðŸ“‹ Recommandations:
{% for rec in integrity_report.recommendations[:3] %}
  [{{ rec.priority }}] {{ rec.action }}
{% endfor %}
{% endif %}

{% endif %}

{% if unified_report %}
ðŸŽ¯ RAPPORT UNIFIÃ‰ (NEXUS)
{'-'*70}
Statut: {{ unified_report.status | default('UNKNOWN') }}
{% if unified_report.priority_actions %}
â€¢ Actions prioritaires: {{ unified_report.priority_actions | length }}
{% endif %}

{% endif %}

{% if usage_stats %}
ðŸ‘¥ STATISTIQUES D'UTILISATION (2h)
{'-'*70}
â€¢ Utilisateurs actifs: {{ usage_stats.summary.active_users_count | default(0) }}
â€¢ RequÃªtes totales: {{ usage_stats.summary.total_requests | default(0) }}
â€¢ Erreurs utilisateurs: {{ usage_stats.summary.total_errors | default(0) }}

{% if usage_stats.top_features and usage_stats.top_features | length > 0 %}
ðŸ”¥ TOP FEATURES:
{% for feature in usage_stats.top_features[:5] %}
  {{ loop.index }}. {{ feature.feature_name }} ({{ feature.count }} fois)
{% endfor %}
{% endif %}

{% if usage_stats.user_details and usage_stats.user_details | length > 0 %}
ðŸ‘¤ ACTIVITÃ‰ PAR UTILISATEUR:
{% for user in usage_stats.user_details[:10] %}
  â€¢ {{ user.user_email }}
    - Features: {{ user.unique_features_count | default(0) }}
    - DurÃ©e: {{ user.total_duration_minutes | default(0) }} min
    - Erreurs: {{ user.error_count | default(0) }}
{% endfor %}
{% endif %}

{% endif %}

{'='*70}

ðŸ”— LIENS RAPIDES

â€¢ Admin Dashboard: {{ admin_ui_url }}
â€¢ Rapports Complets: {{ cloud_storage_url }}
{% if cloud_logging_url %}
â€¢ Cloud Logging: {{ cloud_logging_url }}
{% endif %}

{'='*70}

ðŸ¤– Guardian Autonomous Monitoring System
Ã‰MERGENCE V8 - Rapports automatiques toutes les 2h

Contact: emergence.app.ch@gmail.com

---
Cet email a Ã©tÃ© envoyÃ© automatiquement par Ã‰MERGENCE.
Merci de ne pas rÃ©pondre Ã  cet email.
