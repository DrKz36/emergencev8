# üó∫Ô∏è Roadmap Strat√©gique - √âMERGENCE V8.0

*Version : 2025-09-14*

Cette feuille de route consolide la vision V8 en d√©crivant l‚Äô√©tat courant et les jalons √† venir. Elle articule les piliers (chat multi-agents, m√©moire progressive, RAG, cockpit, d√©bats) et priorise les chantiers en fonction des risques identifi√©s.

---

## Principes directeurs
- **Architecture modulaire** : chaque capability (chat, m√©moire, documents, d√©bats, cockpit) est encapsul√©e (backend service + module frontend d√©di√©).
- **S√©curit√© & Auth** : tout appel REST/WS requiert un ID token (mode dev activable via `AUTH_DEV_MODE`).
- **Observabilit√©** : instrumentation native (`ws:model_info`, `ws:memory_banner`, `dashboard`), scripts de smoke-tests pour valider les invariants.
- **Sobri√©t√© des co√ªts** : orchestration multi-fournisseurs (Google ‚Üí Anthropic ‚Üí OpenAI) + suivi des co√ªts (`DashboardService`).

---

## √âtat actuel (2025-09)
- **Chat temps r√©el** : op√©rationnel via WS + fallback REST. Threads persist√©s (SQLite) avec hydratation automatique c√¥t√© front.
- **M√©moire STM/LTM** : `MemoryGardener` et `MemoryAnalyzer` en place (analyse globale ou cibl√©e, purge STM/LTM). Notifications front via `ws:analysis_status` / `ws:memory_banner`.
- **RAG documents** : upload `.pdf|.txt|.docx`, vectorisation Chroma, sources affich√©es dans le chat.
- **D√©bats multi-agents** : orchestr√©s par `DebateService`, synth√®se finale et export.
- **Cockpit** : agr√©gation co√ªts/sessions/documents expos√©e via `/api/dashboard/costs/summary` et rendue dans `DashboardModule`.

---

## Roadmap structur√©e

### P2 ‚Äî M√©moire vive & consolidation continue (En cours)
- Optimiser l‚Äôexp√©rience utilisateur en cas d‚Äô√©chec auth (toasts explicites, re-prompt GIS).
- Afficher l‚Äôhistorique de consolidation (`GET /api/memory/tend-garden`) dans l‚ÄôUI m√©moire.
- Couvrir `memory:clear` par tests automatis√©s (smoke + unitaires cibl√©s).
- Consolider la m√©moire persistante : sauvegarde int√©grale des sessions (JSON), analyse s√©mantique (th√®mes, concepts, entit√©s) et score de vivacit√© d√©cr√©ment√© dans le temps pour orchestrer l‚Äôoubli via le `MemoryGardener`.
- Modules concern√©s : `core/database.py`, `core/session_manager.py`, `features/memory/analyzer.py`, `features/memory/gardener.py`, `core/temporal_search.py`.

### P3 ‚Äî RAG ma√Ætris√© (Stabilis√©)
- √âtendre les formats support√©s (Markdown, HTML l√©ger) en assurant la purge d‚Äôembeddings.
- Ajout de filtres RAG c√¥t√© UI (s√©lection docs par thread).

### P4 ‚Äî Interaction vocale (√Ä cadrer)
- POC micro front (enregistrement + streaming) + int√©gration STT/TTS avec fallback texte.
- D√©finir la strat√©gie co√ªt/latence (mod√®les vocaux vs. LLM existants).

### P5 ‚Äî Analyse d‚Äôimages (√Ä venir)
- Inventaire des APIs multimodales compatibles (GPT-4o, Gemini 1.5).
- Adapter `ChatService` pour l‚Äôinjection d‚Äôassets binaires et la diffusion des r√©sultats.

### P6 ‚Äî Agent connect√© (Backlog)
- Design du `WebConnector` (scraping s√©curis√©, caches).
- D√©finir les politiques d‚Äôusage (quota, journalisation).

### P7 ‚Äî Cockpit √©tendu (It√©ratif)
- D√©composer les co√ªts par fournisseur/mod√®le.
- Ajouter la sant√© des services (vector store, latence WS) et une timeline d‚Äô√©v√©nements.

---

## √âtapes imm√©diates (Priorit√©s Semaine Courante)
1. **Stabilit√© Auth** : impl√©menter une remont√©e visuelle c√¥t√© front lorsque `ensureCurrentThread()` √©choue (message ‚ÄúConnexion requise‚Äù).
2. **Tests m√©moire** : ex√©cuter `tests/run_all.ps1` + ajouter un sc√©nario cibl√© `memory:clear` (script d√©di√© ou extension existant).
3. **Documentation UX** : compl√©ter `docs/Memoire.md` (pr√©sent document) avec captures/flows pour guider la QA manuelle.
4. **Surveillance vector store** : planifier un run hebdo de `tests/test_vector_store_reset.ps1` pour s√©curiser l‚Äôauto-reset.

---

## Risques & points de vigilance
- **D√©pendances API** : absence de cl√© IA ‚Üí erreur serveur (`500`). Pr√©parer un mode ‚Äúlimit√©‚Äù pour les environnements d√©pourvus de cl√©s.
- **T√©l√©chargement SBERT** : premier appel long (cache local). Pr√©voir warm-up lors du d√©ploiement.
- **√âchecs silencieux** : beaucoup d‚Äôerreurs sont logu√©es sans feedback utilisateur (auth, WS). N√©cessit√© de toasts/CTA.
- **Vector store** : corruption possible (SQLite). Conserver les backups automatiques `vector_store_backup_*`.

---

## R√©f√©rences
- Architecture d√©taill√©e : `docs/architecture/*.md`
- M√©moire progressive : `docs/Memoire.md`
- Tests : `tests/run_all.ps1`, `tests/test_vector_store_reset.ps1`, `tests/test_vector_store_force_backup.ps1`
